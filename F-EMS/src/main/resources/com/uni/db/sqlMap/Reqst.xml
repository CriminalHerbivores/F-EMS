<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<!--  [[개정이력(Modification Information)]]        -->
<!--  수정일       수정자      수정내용             -->
<!--  ==========   ======    ==============         -->
<!--  $2017.01.24    KJH       최초작성             -->
<!--  $2017.02.20    KJH       추가작성             -->
<!--  Copyright (c) 2017 by DDIT All right reserved -->

<sqlMap namespace="Reqst">
	<typeAlias alias="reqst" type="com.uni.fems.dto.ReqstVO" />
	<typeAlias alias="lctre_Search" type="com.uni.fems.dto.Lctre_SearchVO" />
	
	<!-- 수강신청 완료 목록 조회 -->
	<select id="selectReqst" parameterClass="str" resultClass="lctre_Search">
		SELECT * FROM course_view
		WHERE re_Stdnt_No=#re_Stdnt_No# 
		and lc_Lctrbgn_Dt between (select add_months(sysdate,-4) from dual) and (select add_months(sysdate,1) from dual)
		order by lc_Lctre_Code asc
	</select>

	<!-- 수강 신청 -->
	<update id="insertReqst" parameterClass="reqst">
		INSERT INTO REQST(re_Stdnt_No,re_Lctre_No)
		VALUES(#re_Stdnt_No#,#re_Lctre_No#)
	</update>
	
	<!-- 수강 신청 취소 -->
	<update id="deleteReqst" parameterClass="reqst">
		delete from REQST where re_Stdnt_No=#re_Stdnt_No# and re_Lctre_No=#re_Lctre_No#
	</update>
	

</sqlMap>