<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
    "http://www.ibatis.com/dtd/sql-map-2.dtd">
    
<sqlMap namespace="Lctre">
	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />
	<typeAlias alias="lctre" type="com.uni.fems.dto.LctreVO" />
	
		
	<!-- 한개 강의 가져오기 -->
	<select id="getLctre" parameterClass="int" resultClass="lctre">
		select * from lctre_view 
		where lc_Lctre_No=#lc_Lctre_No# 
	</select>
	
	
	<!-- 강의 콤보박스로 검색 -->
	<select id="listCodeLctre" parameterClass="str" resultClass="lctre">
		select * from lctre_view
		where upper(lu_lctre_nm) like '%'||upper(#lu_lctre_nm#)||'%'
		and upper(lu_lctre_code) like '%'||upper(#lu_lctre_code#)||'%'
		and upper(pr_nm) like '%'||upper(#pr_nm#)||'%'
		and upper(coleg_nm) like '%'||upper(#coleg_nm#)||'%'
		and upper(fc_faculty_nm) like '%'||upper(#fc_faculty_nm#)||'%'
		and upper(sit_subjct) like '%'||upper(#sit_subjct#)||'%'
		order by lu_Lctre_code asc, lc_split asc 
	</select>
	
	<!-- 강의 상세 검색 -->
	<select id="listDetailLctre" parameterClass="str" resultClass="lctre">
		select * from lctre_view
		
		order by LCTRE_UNQ_NO.lu_Lctre_code asc, LCTRE.lc_split asc
	</select>
	
	
	<!-- 전체 강의 목록 -->
	<select id="listLctre" parameterClass="int" resultClass="lctre">
		select * from lctre_view order by lu_Lctre_code asc, lc_split asc 
	</select>
	
	<!-- [수강신청] 현재 학기의 전체 강의 갯수 : 페이징 안 함 -->
	<select id="selectCount" resultClass="int">
		select count(*) from lctre where lc_Lctrbgn_Dt=to_date(#lc_Lctrbgn_Dt#)
	</select>
		<!-- 쿼리 손 볼것...현재 학기를 갖고와야 하니까 -->
	
	<!-- 강의 등록 -->
	<update id="insertLctre" parameterClass="lctre">
		insert into lctre(lc_Lctre_No,lc_Profsr_No,lc_Lctre_Code,lc_Lctrbgn_Dt,lc_Lctre_Nmpr,lc_Wik_Lctre_Dayweek,lc_Lctre_Time,lc_Pnt,lc_Grade,lc_Lctrum_No,lc_Open_At,lc_Lctre_Org,lc_Lctre_Evl_Score,lc_Split)
			values(#lc_Lctre_No#,#lc_Profsr_No#,#lc_Lctre_Code#,#lc_Lctrbgn_Dt#,#lc_Lctre_Nmpr#,#lc_Wik_Lctre_Dayweek#,#lc_Lctre_Time#,#lc_Pnt#,#lc_Grade#,#lc_Lctrum_No#,#lc_Open_At#,#lc_Lctre_Org#,#lc_Lctre_Evl_Score#,#lc_Split#)
	</update>
	
	<!-- 강의 수정 -->
	<update id="updateLctre" parameterClass="lctre">
		update lctre set lc_Lctre_No=#lc_Lctre_No#,lc_Profsr_No=#lc_Profsr_No#,lc_Lctre_Code=#lc_Lctre_Code#,lc_Lctrbgn_Dt=#lc_Lctrbgn_Dt#,lc_Lctre_Nmpr=#lc_Lctre_Nmpr#,lc_Wik_Lctre_Dayweek=#lc_Wik_Lctre_Dayweek#,lc_Lctre_Time=#lc_Lctre_Time#,lc_Pnt=#lc_Pnt#,lc_Grade=#lc_Grade#,lc_Lctrum_No=#lc_Lctrum_No#,lc_Open_At=#lc_Open_At#,lc_Lctre_Org=#lc_Lctre_Org#,lc_Lctre_Evl_Score=#lc_Lctre_Evl_Score#,lc_Split=#lc_Split#
		where lc_Lctre_No=#lc_Lctre_No#
	</update>
	

	
</sqlMap>