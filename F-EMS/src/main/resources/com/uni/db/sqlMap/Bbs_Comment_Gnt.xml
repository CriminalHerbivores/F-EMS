<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!--  [[개정이력(Modification Information)]]       -->
<!--  수정일               수정자            수정내용               -->
<!--  ==========   ======    ==============        -->
<!--  2017.02.21    KJS            최초작성               -->
<!--  Copyright (c) 2017 by DDIT All right reserved -->

<sqlMap namespace="Bbs_Comment">

	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />
	<typeAlias alias="bbs_comment_gnt" type="com.uni.fems.dto.Bbs_Comment_GntVO" />
	<typeAlias alias="bbs_list_comment_gnt" type="com.uni.fems.dto.Bbs_List_Comment_GntVO" />
	<typeAlias alias="bbs_list_gnt" type="com.uni.fems.dto.Bbs_List_GntVO" />
	
	<select id="listAllBbs_Comment_Gnt" parameterClass="str" resultClass="bbs_comment_gnt">
		select * from COMMENT_$bl_Table_Nm$ order by bc_writng_dt desc
	</select>
	
	<select id="getBbs_Comment_Gnt" parameterClass="bbs_list_comment_gnt" resultClass="bbs_comment_gnt">
		select * from COMMENT_$bl_Table_Nm$ where bc_bbs_no=#bc_Bbs_No# order by bc_writng_dt desc
	</select>
	
	<update id="insertBbs_Comment_Gnt" parameterClass="bbs_list_comment_gnt">
		insert into COMMENT_$bl_Table_Nm$(bc_comnt_no,bc_bbs_no,bc_user_id,bc_comnt_content,bc_Writng_Dt) 
		values(((select max(bc_Comnt_No)from COMMENT_$bl_Table_Nm$)+1),#bc_Bbs_No#,#bc_User_Id#,#bc_Comnt_Content#,sysdate)
	</update>
	
	<update id="updateBbs_Comment_Gnt" parameterClass="bbs_list_comment_gnt">
		update COMMENT_$bl_Table_Nm$ set bc_comnt_content=#bc_Comnt_Content# 
		where bc_comnt_no=#bc_Comnt_No#
	</update>
	
	<update id="deleteBbs_Comment_Gnt" parameterClass="bbs_list_comment_gnt">
		delete from COMMENT_$bl_Table_Nm$ where bc_comnt_no=#bc_Comnt_No#
	</update>
	
	<update id="deleteAllBbs_Comment_Gnt" parameterClass="bbs_list_gnt">
		delete from COMMENT_$bl_Table_Nm$ where bc_bbs_no=#bb_Bbs_No#
	</update>
	
	<select id="totalBbs_Comment_Gnt" parameterClass="bbs_list_comment_gnt" resultClass="int">
		select count(*) from COMMENT_$bl_Table_Nm$ where bc_bbs_no=#bc_Bbs_No#
	</select>
	
	
	
	
	
	
	
</sqlMap>
