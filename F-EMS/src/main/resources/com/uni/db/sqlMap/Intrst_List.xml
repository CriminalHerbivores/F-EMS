<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!--  [[개정이력(Modification Information)]]        -->
<!--  수정일       수정자      수정내용             -->
<!--  ==========   ======    ==============         -->
<!--  $2017.01.24    KJH       최초작성             -->
<!--  $2017.02.20    KJH       추가작성             -->
<!--  $2017.02.25    KJH       추가작성             -->
<!--  Copyright (c) 2017 by DDIT All right reserved -->
        
<sqlMap namespace="Intrst_List">
	<typeAlias alias="intrst_List" type="com.uni.fems.dto.Intrst_ListVO" />
	<typeAlias alias="lctre_Search" type="com.uni.fems.dto.Lctre_SearchVO" />

	<!-- 관심목록 조회 -->
	<select id="selectIntrst_List" parameterClass="str" resultClass="lctre_Search">
		select * from INTRST_VIEW
		where in_Stdnt_No=#in_Stdnt_No#
		and lc_Lctrbgn_Dt between (select add_months(sysdate,-4) from dual) and (select add_months(sysdate,1) from dual)
		and lc_Open_At='y'
		order by lc_Lctre_Code asc
	</select>

	<!-- 관심목록 등록 -->
	<update id="insertIntrst_List" parameterClass="intrst_List">
		insert INTO intrst_list (in_Stdnt_No,in_Lctre_No) 
		values (#in_Stdnt_No#,#in_Lctre_No#)
	</update>
	<!-- 
	MERGE INTO intrst_list
		USING DUAL
		on (in_Stdnt_No=#in_Stdnt_No# and in_Lctre_No=#in_Lctre_No#)
		WHEN NOT MATCHED THEN
	
	 -->
	
	
	<!-- 관심목록 삭제 -->
	<update id="deleteIntrst_List" parameterClass="intrst_List">
		delete from intrst_list where in_Stdnt_No=#in_Stdnt_No# and in_Lctre_No=#in_Lctre_No#
	</update>
	
	</sqlMap>