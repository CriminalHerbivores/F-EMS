<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Sknrgs">

	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />
	<typeAlias alias="Sknrgs" type="com.uni.fems.dto.SknrgsVO" />
	<typeAlias alias="SknrgsView" type="com.uni.fems.dto.SknrgsViewVO" />
	
	<select id="getSknrgsType" parameterClass="str" resultClass="SknrgsView">
		select * from sknrgs_view
		<!-- where SKN_TYPE LIKE '%$skn_Type$%' -->
	</select>
	
	<select id="getSknrgs" parameterClass="str" resultClass="str">
		select * from(
		select SKN_TYPE from sknrgs
		where skn_stdnt_no = #skn_Stdnt_No#
		and SKN_USEYN='y'
		ORDER BY skn_no desc)
		where rownum=1
	</select>
	<select id="getStudentSknrgs" parameterClass="str" resultClass="Sknrgs">
		select rownum as skn_no, a.* from 
		(select SKN_TYPE ,SKN_REQST_DT,skn_Content,skn_Useyn from sknrgs s where skn_stdnt_no=#skn_Stdnt_No# order by skn_no asc) a 
		order by skn_no desc
	</select>
	<select id="countStudentSknrgs" parameterClass="str"
		resultClass="int">
		select count(*)
		from sknrgs
		where skn_stdnt_no = #skn_Stdnt_No#
	</select>

	<update id="insertStudentSknrgs" parameterClass="Sknrgs">
		insert into
		SKNRGS(
			skn_No,
			skn_Type,
			skn_Reqst_Dt,
			skn_Stdnt_No,
			skn_Content,
			skn_file
			)
		values(
			skn_seq.nextval,
			#skn_Type#,
			sysdate,
			#skn_Stdnt_No#,
			#skn_Content#,
			#skn_File#
			)
	</update>
	
	<update id="updateUseynSknrgs" parameterClass="Sknrgs">
		update SKNRGS set
			skn_useyn = #skn_Useyn#
			where skn_no = #skn_No#
	</update>
	
</sqlMap>
