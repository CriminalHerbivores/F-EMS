<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!--  [[개정이력(Modification Information)]]       -->
<!--     수정일          수정자              수정내용               -->
<!--  ==========   ======    ==============        -->
<!--  2017.02.21    KJS            최초작성               -->
<!--  Copyright (c) 2017 by DDIT All right reserved -->

<sqlMap namespace="Bbs_Gnt">

	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />
	<typeAlias alias="bbs_gnt" type="com.uni.fems.dto.Bbs_GntVO" />
	<typeAlias alias="bbs_list_gnt" type="com.uni.fems.dto.Bbs_List_GntVO" />
	
	<select id="listAllBbs_Gnt" parameterClass="bbs_list_gnt" resultClass="bbs_gnt">
		select * from BBS_$bl_Table_Nm$ 
		where bb_Sj like '%$bb_Sj$%' 
		and bb_Cn like '%$bb_Cn$%'
		order by bb_Bbs_No desc
	</select>
	
	<select id="maxBbs_Gnt" parameterClass="str" resultClass="int">
		select max(bb_Bbs_no) from BBS_$bl_Table_Nm$
	</select>
	
	<select id="getBbs_Gnt" parameterClass="bbs_list_gnt" resultClass="bbs_gnt">
		select * from BBS_$bl_Table_Nm$ where bb_Bbs_No=#bb_Bbs_No#
	</select>
	
	<update id="insertBbs_Gnt" parameterClass="bbs_list_gnt">
		insert into BBS_$bl_Table_Nm$(bb_Bbs_No,bb_Sklstf_No,bb_Sj,bb_Cn,bb_Writng_dt,bb_Rdcnt) 
		values(((select max(bb_Bbs_No)from BBS_$bl_Table_Nm$)+1),#bb_Sklstf_No#,#bb_Sj#,#bb_Cn#,sysdate,0)
	</update>
	
	<update id="updateBbs_Gnt" parameterClass="bbs_list_gnt">
		update BBS_$bl_Table_Nm$ set bb_Sj=#bb_Sj#,bb_Cn=#bb_Cn# 
		where bb_Bbs_No=#bb_Bbs_No#
	</update>
	
	<update id="deleteBbs_Gnt" parameterClass="bbs_list_gnt">
		delete from BBS_$bl_Table_Nm$ where bb_Bbs_No=#bb_Bbs_No#
	</update>
	
	<select id="totalBbs_Gnt" parameterClass="bbs_list_gnt" resultClass="int">
		select count(*) from BBS_$bl_Table_Nm$
		where bb_Sj like '%$bb_Sj$%' 
		and bb_Cn like '%$bb_Cn$%'
	</select>
	
	<update id="countBbs_Gnt" parameterClass="bbs_list_gnt">
		update BBS_$bl_Table_Nm$ set bb_Rdcnt = #bb_Rdcnt#+1
		where bb_Bbs_No=#bb_Bbs_No#
	</update>
	
	
	
</sqlMap>
