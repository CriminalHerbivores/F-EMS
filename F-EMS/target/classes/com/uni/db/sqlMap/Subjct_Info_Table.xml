<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!--  [[개정이력(Modification Information)]]        -->
<!--  수정일       수정자      수정내용             -->
<!--  ==========   ======    ==============         -->
<!--  $2017.01.24    KJH       최초작성             -->
<!--  $2017.02.15    KJH       추가작성             -->
<!--  Copyright (c) 2017 by DDIT All right reserved -->
        
<sqlMap namespace="Subjct_Info_Table">
	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />
	<typeAlias alias = "colege" type="com.uni.fems.dto.ColegeVO" />
	<typeAlias alias = "faculty" type="com.uni.fems.dto.FacultyVO" />
	<typeAlias alias = "subjct_info_table" type="com.uni.fems.dto.Subjct_Info_TableVO" />
	<typeAlias alias = "tuition" type="com.uni.fems.dto.TuitionVO" />
	<typeAlias alias = "stdnt" type="com.uni.fems.dto.StdntVO" />
	<typeAlias alias = "search" type="com.uni.fems.dto.SearchVO" />
	<typeAlias alias = "userSubjct" type="com.uni.fems.dto.UserSubjctVO" />
	
	<!-- 학과정보 등록 -->
	<update id="insertSubjct_Info_Table" parameterClass="subjct_info_table">
		insert into subjct_info_table(sit_Subjct_Code,sit_Faculty,sit_Subjct,sit_Tut,sit_Subjct_Tlphon_No,sit_Useyn)
			values(#sit_Subjct_Code#,#sit_Faculty#,#sit_Subjct#,#sit_Tut#,#sit_Subjct_Tlphon_No#,#sit_Useyn#)
	</update>
	
	<!-- 학과정보 수정 -->
	<update id="updateSubjct_Info_Table" parameterClass="subjct_info_table">
		update subjct_info_table set sit_Subjct_Code=#sit_Subjct_Code#,sit_Faculty=#sit_Faculty#,sit_Subjct=#sit_Subjct#,sit_Tut=#sit_Tut#,sit_Subjct_Tlphon_No=#sit_Subjct_Tlphon_No#,sit_Useyn=#sit_Useyn#
		where sit_Subjct_Code=#sit_Subjct_Code#
	</update>
	
	<!-- 학과 사용안함 -->
	<update id="deleteSubjct_Info_Table" parameterClass="str">
	   update subjct_info_table set sit_Useyn='n' where sit_Subjct_Code=#sit_Subjct_Code#
	</update>
	
	<!-- 단과대학 정보 조회 -->
	<select id="selectColege" resultClass="colege">
		select * from colege order by coleg_nm
	</select>
	
	<!-- 단과대학으로 학부 정보 조회 -->
	<select id="selectFaculty" parameterClass="str" resultClass="faculty">
		select * from faculty where fc_Coleg_Code = #fc_Coleg_Code# order by FC_FACULTY_NM
	</select>
	
	<!-- 학부로 학과 정보 조회 -->
	<select id="selectSubjct" parameterClass="str" resultClass="subjct_info_table">
		select * from subjct_info_table where sit_Faculty = #sit_Faculty# order by SIT_SUBJCT
	</select>
	
	 <!-- 학과명으로 학과 검색으로 학과,학부,단과대학 조회 -->
	 <select id="selectSubjctByName" parameterClass="str" resultClass="userSubjct">
		select * from major_view
		where sit_Subjct like '%'||#sit_Subjct#||'%'
		or fc_Faculty_Nm like '%'||#sit_Subjct#||'%'
		order by sit_Subjct
	</select>
	
	<!-- 학과명으로 학과 검색으로 학과,학부,단과대학 조회 총 개수 -->
	 <select id="countSubjctByName" parameterClass="str" resultClass="int">
		select count(*) from major_view
		where sit_Subjct like '%'||#sit_Subjct#||'%'
		or fc_Faculty_Nm like '%'||#sit_Subjct#||'%'
		order by sit_Subjct
	</select>
	
	<!-- 학과코드로 학과 정보 조회 -->
	<select id="selectSubjctByCode" parameterClass="str" resultClass="userSubjct">
		select * from major_view
		where sit_Subjct_Code = #sit_Subjct_Code#
		order by sit_Subjct
	</select>
	
	<!-- 학과 등록금 수정 -->
	<update id="updateTut" parameterClass="subjct_info_table">
		update subjct_info_table
		set sit_Tut=#sit_Tut#
		where SIT_SUBJCT_CODE = #sit_Subjct_Code#
	</update>
	
</sqlMap>