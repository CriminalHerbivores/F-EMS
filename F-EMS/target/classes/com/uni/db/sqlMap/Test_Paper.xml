<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<!--  [[개정이력(Modification Information)]]       -->
<!--     수정일          수정자              수정내용               -->
<!--  ==========   ======    ==============        -->
<!--  2017.02.24    송선호            최초작성               -->
<!--  Copyright (c) 2017 by DDIT All right reserved -->
<sqlMap namespace="Test_Paper">
	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />
	<typeAlias alias="testpaper" type="com.uni.fems.dto.Test_PaperVO" />
	
	<select id="listAllTestPaper" parameterClass="int" resultClass="testpaper">
		select tp.*,
    (select COUNT(DISTINCT an_stdnt_no) from answer an where an.an_tp_no =tp.tp_no) as countAnswerSTD
    from test_paper tp
     where tp_lctre_no=#tp_Lctre_No# order by tp_no desc
	</select>
	
	<select id="getTestPaper" parameterClass="int" resultClass="testpaper">
		select * from test_paper where tp_no=#tp_No#
	</select>
	
	<update id="insertTestPaper" parameterClass="testpaper">
		insert into test_paper(tp_no,tp_lctre_no,tp_nm,tp_profsr_no) 
		values(tp_seq.nextval,#tp_Lctre_No#,#tp_Nm#,#tp_Profsr_No#)
	</update>
	
	<update id="updateTestPaper" parameterClass="testpaper">
		update test_paper set tp_nm=#tp_Nm# where tp_no=#tp_No#
	</update>
	
	<update id="deleteTestPaper" parameterClass="int">
		delete from test_paper where tp_no=#tp_No#
	</update>
	
	<select id="maxTp_No" resultClass="int">
		select max(Tp_No) from test_paper
	</select>
	
	
</sqlMap>