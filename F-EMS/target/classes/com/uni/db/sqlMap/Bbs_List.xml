<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!--  [[개정이력(Modification Information)]]        -->
<!--  수정일       수정자      수정내용             -->
<!--  ==========   ======    ==============         -->
<!--  $2017.01.24    KJH       최초작성             -->
<!--  $2017.02.17    KJS       추가작성             -->
<!--  Copyright (c) 2017 by DDIT All right reserved -->
<sqlMap namespace="Bbs_List">
<!-- 
	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />
	<typeAlias alias="bbs_list" type="com.uni.fems.dto.Bbs_ListVO" />
	<typeAlias alias="bbs_atrty" type="com.uni.fems.dto.Bbs_AtrtyVO" />
	<typeAlias alias="bbs_list_atrty" type="com.uni.fems.dto.Bbs_List_AtrtyVO" />


	<select id="listAllBbs_List_Atrty" parameterClass="searchvo" resultClass="bbs_list_atrty">
		select * from bbs_list_view where $key$ like '%'||#value#||'%' order by bl_bbs_no
	</select>
	<select id="totalBbs_List_Atrty" resultClass="int">
		select count(*) from bbs_list_view
	</select>
	
	<select id="getBbs_List_Atrty" parameterClass="int">
		select * from bbs_list_view bl_bbs_no = #bl_bbs_no#
	</select>	

	게시판 리스트 생성
	<update id="insertBbs_Atrty" parameterClass="bbs_list_atrty">
		insert into bbs_list(bl_bbs_no,bl_bbs_nm,bl_table_nm,bl_use_ennc) 
		values((select max(bl_bbs_no)form bbs_list)+1,#bl_bbs_nm#,#bl_table_nm#,#bl_use_ennc#)
		insert into bbs_atrty(ba_bbs_no,ba_manager,ba_sklstf,ba_profsr,ba_stdnt) 
		values((select max(bl_bbs_no)form bbs_list),#ba_manager#,#ba_sklstf#,#ba_profsr#,#ba_stdnt#)
	</update>
	
	게시판 권한 수정
	<update id="updateBbs_Atrty" parameterClass="bbs_atrty">
		update bbs_atrty set 
		ba_manager=#ba_manager#,
		ba_sklstf=#ba_sklstf#,
		ba_profsr=#ba_profsr#,
		ba_stdnt=#ba_stdnt#  
		where ba_bbs_no=#ba_bbs_no#
	</update>
	
	게시판 리스트 사용유무
	<update id="updateBbs_List" parameterClass="bbs_list">
		update bbs_list set 
		bl_use_ennc=#bl_use_ennc#  
		where bl_bbs_no=#bl_bbs_no#
	</update> -->
</sqlMap>