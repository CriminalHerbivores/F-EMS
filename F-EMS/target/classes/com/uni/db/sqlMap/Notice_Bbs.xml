<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!--  [[개정이력(Modification Information)]]       -->
<!--     수정일          수정자              수정내용               -->
<!--  ==========   ======    ==============        -->
<!--  2017.02.01    송선호            최초작성               -->
<!--  Copyright (c) 2017 by DDIT All right reserved -->

<sqlMap namespace="Notice_Bbs">

	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />
	<typeAlias alias="notice_bbs" type="com.uni.fems.dto.Notice_BbsVO" />
	<typeAlias alias="searchvo" type="com.uni.fems.dto.SearchVO" />
	
	<select id="listAllNotice_Bbs" parameterClass="searchvo" resultClass="notice_bbs">
		select * from notice_bbs where $key$ like '%'||#value#||'%' order by nb_writng_dt desc
	</select>
	
	<select id="maxNotice_No" resultClass="int">
		select max(nb_bbs_no) from notice_bbs
	</select>
	
	<select id="listNotice_Bbs" parameterClass="str" resultClass="notice_bbs">
		select * from notice_bbs where nb_Sklstf_No=#nb_Sklstf_No#
	</select>
	
	<select id="getNotice_Bbs" parameterClass="int" resultClass="notice_bbs">
		select * from notice_bbs where nb_bbs_no=#nb_Bbs_No#
	</select>
	
	<update id="insertNotice_Bbs" parameterClass="notice_bbs">
		insert into notice_bbs(nb_bbs_no,nb_Sklstf_No,nb_sj,nb_cn) 
		values(nb_seq.nextval,#nb_Sklstf_No#,#nb_Sj#,#nb_Cn#)
	</update>
	
	<update id="updateNotice_Bbs" parameterClass="notice_bbs">
		update notice_bbs set nb_sj=#nb_Sj#,nb_Cn=#nb_Cn# 
		where nb_bbs_no=#nb_Bbs_No#
	</update>
	
	<update id="deleteNotice_Bbs" parameterClass="int">
		delete from notice_bbs where nb_bbs_no=#nb_Bbs_No#
	</update>
	
	<select id="totalNotice_Bbs" resultClass="int">
		select count(*) from notice_bbs
	</select>
	
	<update id="countNotice_Bbs" parameterClass="notice_bbs">
		update notice_bbs set nb_rdcnt = #nb_Rdcnt#+1
		where nb_bbs_no=#nb_Bbs_No#
	</update>
	
	
	
</sqlMap>
