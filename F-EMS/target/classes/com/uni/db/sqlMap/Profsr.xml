<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!--  [[개정이력(Modification Information)]]       -->
<!--  수정일              수정자        수정내용               -->
<!--  ==========   ======    ==============        -->
<!--  2017.01.24.   JAR      최초작성               -->
<!--  2017.02.15.   JAR      추가작성               -->
<!--  Copyright (c) 2017 by DDIT All right reserved -->

<sqlMap namespace="Profsr">
	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />
	<typeAlias alias="profsr" type="com.uni.fems.dto.ProfsrVO" />

	<!-- 교수 개수 등록 -->
	<select id="totalProfsr" parameterClass="str" resultClass="int">
		select count(*) from profsr where pr_profsr_no like '%$pr_profsr_no$%'
	</select>

	<!-- 교수 페이지로 출력 -->
	<select id="selectAllProfsrPage" parameterClass="str"
		resultClass="profsr">
		select * from profsr where pr_nm like '%$pr_nm$%'
	</select>

	<!-- 교수 한명 출력 -->
	<select id="selectProfsr" parameterClass="str" resultClass="profsr">
		select * from profsr_view where pr_profsr_no = #pr_profsr_no#
	</select>

	<select id="createProfsrNo" parameterClass="profsr" resultClass="str">
	select '0'||trim(to_char((select substr(max(to_number(pr_Profsr_No))+1,-3) from Profsr where pr_profsr_no like #createNo#||'%'), '000')) from dual
	</select>

	<update id="insertProfsr" parameterClass="profsr">
		insert into profsr(
		pr_Profsr_No,
		pr_Pw,
		pr_Nm,
		pr_Eng_Nm,
		pr_Ihidnum,
		pr_Moblphon_No,
		pr_House_Tlphon_No,
		pr_Profsr_Tlphon_No,
		pr_Post_No,
		pr_Adres1,
		pr_Adres2,
		pr_Email)
		values(
		#pr_Profsr_No#,
		#pr_Pw#,
		#pr_Nm#,
		#pr_Eng_Nm#,
		#pr_Ihidnum#,
		#pr_Moblphon_No#,
		#pr_House_Tlphon_No#,
		#pr_Profsr_Tlphon_No#,
		#pr_Post_No#,
		#pr_Adres1#,
		#pr_Adres2#,
		#pr_Email#
		)
	</update>
	
	<update id="updateProfsr" parameterClass="profsr">
	update profsr set 
		pr_Pw = #pr_Pw#,
		pr_Nm = #pr_Nm#,
		pr_Eng_Nm = #pr_Eng_Nm#,
		pr_Ihidnum = #pr_Ihidnum#,
		pr_Moblphon_No = #pr_Moblphon_No#,
		pr_House_Tlphon_No = #pr_House_Tlphon_No#,
		pr_Profsr_Tlphon_No = #pr_Profsr_Tlphon_No#,
		pr_Post_No = #pr_Post_No#,
		pr_Adres1 = #pr_Adres1#,
		pr_Adres2 = #pr_Adres2#,
		pr_Email = #pr_Email#
		where pr_Profsr_No = #pr_Profsr_No#
	</update>
	
	<update id="updatePwProfsr" parameterClass="profsr">
		update stdnt
		set pr_Pw = #pr_Pw#
		where pr_Profsr_No = #pr_Profsr_No#
	</update>
	
	<!-- 학생조회 -->
	<select id="selectAllProfsrList2" parameterClass="profsr" resultClass="profsr">
		select * from Profsr_view
		where pr_Profsr_No like '%$pr_Profsr_No$%'
		and pr_Nm like '%$pr_Nm$%'
		and sit_Subjct like '%$sit_Subjct$%'
	</select>
	
	<!-- 학생 개수 조회 -->
	<select id="countProfsrList2" parameterClass="profsr" resultClass="int">
		select count(*) from Profsr_view
		where pr_Profsr_No like '%$pr_Profsr_No$%'
		and pr_Nm like '%$pr_Nm$%'
		and sit_Subjct like '%$sit_Subjct$%'
	</select>
	
</sqlMap>
