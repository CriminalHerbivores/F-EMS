<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!--  [[개정이력(Modification Information)]]       -->
<!--  수정일              수정자        수정내용               -->
<!--  ==========   ======    ==============        -->
<!--  2017.01.24.   JAR      최초작성               -->
<!--  2017.01.26.   KJS      추가작성               -->
<!--  2017.02.15.   JAR      추가작성               -->
<!--  2017.02.21.   KJH      추가작성               -->
<!--  2017.03.07.   KJS      추가작성               -->
<!--  Copyright (c) 2017 by DDIT All right reserved -->

<sqlMap namespace="Sklstf">
	<typeAlias alias = "int" type="java.lang.Integer" />
	<typeAlias alias = "str" type="java.lang.String" />
	<typeAlias alias = "sklstf" type="com.uni.fems.dto.SklstfVO" />
	<typeAlias alias="searchvo" type="com.uni.fems.dto.SearchVO" />
	<typeAlias alias = "userSubjct" type="com.uni.fems.dto.UserSubjctVO" />
	
	<select id="getSklstfList" parameterClass="str" resultClass="sklstf">
		select * 
		from sklstf
		where STF_SKLSTF_NO like '%$stf_Sklstf_No$%'		
	</select>
	
	<!-- 1명의 직원 정보 받아오기 -->
	<select id="getSklstf" parameterClass="str" resultClass="sklstf">
		select * 
		from sklstf
		where STF_SKLSTF_NO = #stf_Sklstf_No$#		
	</select>

	<!-- 직원 정보 수정 -->
	<update id="updateSklstf" parameterClass="sklstf">
		update sklstf set 
		STF_SUBJECT_CODE = #stf_Subject_Code#,
		STF_ENG_NM = #stf_Eng_Nm#, 
		STF_MOBLPHON_NO = #stf_Moblphon_No#,
		STF_HOUSE_TLPHON_NO = #stf_House_Tlphon_No#,
		STF_PW = #stf_Pw#,
		STF_POST_NO = #stf_Post_No#,
		STF_ADRES1 = #stf_Adres1#,
		STF_ADRES2 = #stf_Adres2#,
		STF_EMAIL = #stf_Email#
		where STF_SKLSTF_NO = #stf_Sklstf_No#
		
	</update>
	
	<!-- 관리자의 직원 등록 -->
	<update id="insertSklstf" parameterClass="sklstf">
		insert into sklstf(STF_SKLSTF_NO,stf_Sklstf_Tlphon_No,STF_SUBJECT_CODE,STF_NM,STF_ENG_NM,STF_IHIDNUM,STF_MOBLPHON_NO,STF_HOUSE_TLPHON_NO,STF_PW,STF_POST_NO,STF_ADRES1,STF_ADRES2,STF_EMAIL,STF_USEYN)
		values(#stf_Sklstf_No#,#stf_Sklstf_Tlphon_No#,#stf_Subject_Code#,#stf_Nm#,#stf_Eng_Nm#,#stf_Ihidnum#,#stf_Moblphon_No#,#stf_House_Tlphon_No#,#stf_Pw#,#stf_Post_No#,#stf_Adres1#,#stf_Adres2#,#stf_Email#,#stf_Useyn#)
	</update>
	
	
	<!-- 직원 목록 -->
<!-- 	<select id="listSklstf" parameterClass="str" resultClass="userSubjct">
		select * from sklstf_view where stf_Nm like '%'||#stf_Nm#||'%' 
	</select>	 -->
	
	
	<!-- 전체 직원목록의 갯수 -->
	<select id="totalSklstf" parameterClass="searchvo" resultClass="int">
		select count(*) from sklstf_view where $key$ like '%'||#value#||'%'
		and stf_Useyn = #useyn#
	</select>
	
	<!-- 전체 직원 목록 -->
	<select id="listAllSklstf" parameterClass="searchvo" resultClass="userSubjct">
		select * from sklstf_view where $key$ like '%'||#value#||'%' 
		and stf_Useyn = #useyn#
		order by stf_Sklstf_No desc 
	</select>
	
	<!-- 관리자 최초 가입 -->
	<update id="joinAdmin" parameterClass="sklstf">
		insert into sklstf(stf_Sklstf_No,stf_Pw,stf_Email,stf_Useyn)
		values(#stf_Sklstf_No#,#stf_Pw#,#stf_Email#,#stf_Useyn#)
	</update>
	
	<!-- 직원 달퇴-->
	<update id="deleteSklstf" parameterClass="str">
		update sklstf set stf_Useyn='0' where stf_Sklstf_No = #stf_Sklstf_No#
	</update>
	
	<!-- 직원 복귀-->
	<update id="returnSklstf" parameterClass="str">
		update sklstf set stf_Useyn='1' where stf_Sklstf_No = #stf_Sklstf_No#
	</update>
	
	
</sqlMap>
